<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>AerialodSlopefield</title>
		<meta name="description" content="Virtual landscape generator for Aerialod" />
		<meta name="keywords" content="Aerialod, Slopefield, Mathematical functions, 3D landscape generator" />
		<meta name="author" content="Bogdan StÄƒncescu" />
		<meta property="og:image" content="https://github.com/Gutza/AerialodSlopefieldWebsite/images/Cos(x over y) [sf.2].png" />
		
		<!-- Fonts -->
		<link href="https://fonts.googleapis.com/css2?family=Old+Standard+TT:ital,wght@0,400;0,700;1,400&family=PT+Serif:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet"> 
		<!-- /Fonts -->
		
		<!-- jQuery -->
		<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
		<!-- /jQuery -->
		
		<!-- Bootstrap -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous" />
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous" />
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
		<!-- /Bootstrap -->
		
		<!-- MathJax -->
		<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
		<!-- /MathJax -->

		<link rel="stylesheet" href="main.css" />

<script>
// TODO: Check all raw/normalized types in the JSON!
// TODO: Randomize the order!
// TODO: Add author and date
$(function() {
	$
		.get("gallery.json")
		.done(function(data) {
			var i = -1;
			data.forEach((item) => {
				i++;
				
				const content = document.createElement("div");
				const $content = $(content);
				const image = document.createElement("img");
				const $image = $(image);
				$image.attr("src", "images/" + item.image).attr("alt", "Image " + i);
				const caption = document.createElement("div");
				$caption = $(caption);
				$caption.addClass("carousel-caption");
				$("<h3></h3>")
					.html(item.title)
					.appendTo($caption);
				$("<p></p>")
					.html(item.body)
					.appendTo($caption);
				$(content).addClass("item").append($image).append($caption).appendTo("#gallery-carousel-inner");
				
				const indicator = document.createElement("li");
				const $indicator = $(indicator);
				$indicator.attr("data-target", "#gallery-carousel").attr("data-slide-to", i);
				if (0 == i) {
					$content.add($indicator).addClass("active");
				}
				$("#gallery-carousel-indicators").append(indicator);
			});
			
			// Tell MathJax to reevaluate the DOM.
			/*
			TODO
			----
			This is a bit buggy, but I couldn't find a better solution so far.
			Only the first title has the formulas rendered correctly at the proper size,
			all the subsequent ones have smaller formulas. I suspect this is caused by
			MathJax attempting to somehow evaluate the size of the font based on the size
			of the nearby characters, and it can't evaluate that properly when the content isn't
			displayed.
			*/
			MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
		})
		.fail(function(e) {
			console.log("Failed retieving the gallery JSON!", e);
		});
})
</script>
	</head>
	<body>
		<div id="gallery-carousel" class="carousel slide" data-ride="carousel">

			<!-- Indicators -->
			<ol id="gallery-carousel-indicators" class="carousel-indicators"></ol>

			<!-- Content -->
			<div id="gallery-carousel-inner" class="carousel-inner"></div>
			
			<!-- Controls -->
			<a class="left carousel-control" href="#gallery-carousel" role="button" data-slide="prev"  onclick="$('#gallery-carousel').carousel('prev')">
				<span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
				<span class="sr-only">Previous</span>
			</a>
			<a class="right carousel-control" href="#gallery-carousel" role="button" data-slide="next"  onclick="$('#gallery-carousel').carousel('next')">
				<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
				<span class="sr-only">Next</span>
			</a>
		</div>
	</body>
</html>